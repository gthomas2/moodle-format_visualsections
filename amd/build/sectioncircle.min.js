define ("format_visualsections/sectioncircle",["jquery"],function(a){return{applySegments:function applySegments(){a(function(){a(".section-circle svg").each(function(){var b=a(this).data("subtopicsjson"),c=a(this).data("stroke");e(this,b,c)});function b(a,b,c,d,e){if(d>e){var f=d;d=e;e=f}if(e-d>2*Math.PI){e=1.99999*Math.PI}var g=e-d<=Math.PI?0:1;return["M",a,b,"L",a+Math.cos(d)*c,b-Math.sin(d)*c,"A",c,c,0,g,0,a+Math.cos(e)*c,b-Math.sin(e)*c,"L",a,b].join(" ")+" Z"}function c(a,b,c,d){var e=2*Math.PI*a;return"<circle cx=\"0\" cy=\"0\" r=\"".concat(a,"\"\n                                    transform=\"rotate(").concat(b,") scale(1 -1)\"\n                                    stroke-dasharray=\"").concat(e,"\"\n                                    stroke-dashoffset=\"").concat(e*(1-c/100),"\"\n                                    stroke-width=\"20\"\n                                    fill=\"none\"\n                                    stroke=\"").concat(d,"\"/>")}function d(a,b,c,d,e){var f="<rect x=\"".concat(a,"\" y=\"").concat(b,"\" width=\"").concat(c,"\" height=\"").concat(c,"\" fill=\"url(#").concat(d,")\" />");if(e){f="<a href=\"".concat(e,"\">").concat(f,"</a>")}return f}function e(e,f,g){var h=100/f.length,i=a(e).find("> circle").attr("r"),j=i,k=0,l=0,m=a(e).find(".arcs");m.empty();var n=0,o=360/f.length;if(1<f.length){for(var B=0;B<f.length;B++){n=o+B*(360/f.length);var p=f[B];l+=h;var s=2*Math.PI/(100/l);a("<path />").attr("d",b(0,0,i,k,2*s)).attr("stroke",g).attr("stroke-width","6").attr("fill","none").appendTo(a(m));window.console.log("segment progress",p.progress);a(c(370,n,p.progress/f.length,g)).appendTo(a(m));a(m).html(a(m).html());k+=s}}else{n=-180;var p=f[0];a(c(370,n,p.progress/f.length,g)).appendTo(a(m))}switch(f.length){case 1:j=1.3*i;break;case 2:j=i/1.25;break;case 3:j=i/1.5;break;case 4:j=i/1.75;break;case 5:j=i/1.75;break;}if(1<f.length){for(var C=0;C<f.length;C++){var q=Math.PI/f.length,r=Math.PI/i+2*(q*C);r+=Math.PI/f.length;var t=i/2*Math.cos(r),u=i/2*Math.sin(r);if(5===f.length){t=i/1.75*Math.cos(r);u=i/1.75*Math.sin(r)}t-=j/2;u-=j/2;if(2===f.length){if(1==C){u=-(j+20)}else{u=20}}var v=f[C].typecode,w=f[C].link?f[C].link:null;a(d(t,u,j,v,w)).appendTo(a(m));a(m).html(a(m).html())}}else if(1===f.length){var z=f[0].typecode,t=-j/2,u=-j/2,A=f[0].link?f[0].link:null;a(d(t,u,j,z,A)).appendTo(a(m));a(m).html(a(m).html())}}})}}});
//# sourceMappingURL=sectioncircle.min.js.map
