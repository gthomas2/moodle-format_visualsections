define ("format_visualsections/sectioncircle",["jquery"],function(a){return{applySegments:function applySegments(){a(function(){a(".section-circle svg").each(function(){var b=a(this).data("subtopicsjson");e(this,b)});function b(a,b,c,d,e){if(d>e){var f=d;d=e;e=f}if(e-d>2*Math.PI){e=1.99999*Math.PI}var g=e-d<=Math.PI?0:1;return["M",a,b,"L",a+Math.cos(d)*c,b-Math.sin(d)*c,"A",c,c,0,g,0,a+Math.cos(e)*c,b-Math.sin(e)*c,"L",a,b].join(" ")+" Z"}function c(a,b,c){var d=2*Math.PI*a;return"<circle class=\"subsection-progress\" cx=\"0\" cy=\"0\" r=\"".concat(a,"\"\n                                    transform=\"rotate(").concat(b,") scale(1 -1)\"\n                                    stroke-dasharray=\"").concat(d,"\"\n                                    stroke-dashoffset=\"").concat(d*(1-c/100),"\"\n                                    stroke-width=\"20\"\n                                    fill=\"none\"/>")}function d(a,b,c,d,e){var f="<rect x=\"".concat(a,"\" y=\"").concat(b,"\" width=\"").concat(c,"\" height=\"").concat(c,"\" fill=\"url(#").concat(d,")\" />");if(e){f="<a href=\"".concat(e,"\">").concat(f,"</a>")}return f}function e(e,f){var g=100/f.length,h=a(e).find("> circle").attr("r"),i=h,j=0,k=0,l=a(e).find(".arcs");l.empty();var m=0,n=360/f.length;if(1<f.length){for(var D=0;D<f.length;D++){k+=g;var o=f[D],p=2*Math.PI/(100/k);a("<path />").attr("d",b(0,0,h,j,2*p)).attr("stroke-width","6").attr("fill","none").appendTo(a(l));if(0<o.progress){var q=0<100-o.progress?(100-o.progress)/100:0;m=n+(D-q)*(360/f.length);a(c(370,m,o.progress/f.length)).appendTo(a(l))}a(l).html(a(l).html());j+=p}}else{m=-180;var o=f[0],r="undefined"!=typeof o?o.progress:0;a(c(370,m,r/f.length)).appendTo(a(l))}switch(f.length){case 1:i=1.3*h;break;case 2:i=h/1.25;break;case 3:i=h/1.5;break;case 4:i=h/1.75;break;case 5:i=h/1.75;break;}if(1<f.length){for(var s=0;s<f.length;s++){var t=Math.PI/f.length,u=Math.PI/h+2*(t*s);u+=Math.PI/f.length;var v=h/2*Math.cos(u),w=h/2*Math.sin(u);if(5===f.length){v=h/1.75*Math.cos(u);w=h/1.75*Math.sin(u)}v-=i/2;w-=i/2;if(2===f.length){if(1==s){w=-(i+20)}else{w=20}}var z=f[s].typecode,A=f[s].link?f[s].link:null;a(d(v,w,i,z,A)).appendTo(a(l));a(l).html(a(l).html())}}else if(1===f.length){var B=f[0].typecode,v=-i/2,w=-i/2,C=f[0].link?f[0].link:null;a(d(v,w,i,B,C)).appendTo(a(l));a(l).html(a(l).html())}}})}}});
//# sourceMappingURL=sectioncircle.min.js.map
