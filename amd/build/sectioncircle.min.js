define ("format_visualsections/sectioncircle",["jquery"],function(a){return{applySegments:function applySegments(){a(function(){a(".section-circle svg").each(function(){var c=a(this).data("subtopicsjson"),d=a(this).data("progress"),f=a(this).data("stroke");b(this,d);e(this,c,f)});function b(b,c){var d=a(b).find(".progress"),e=a(d).attr("r"),f=2*Math.PI*e;a(d).attr("stroke-dasharray",f).attr("stroke-dashoffset",f*(1-c/100))}function c(a,b,c,d,e){if(d>e){var f=d;d=e;e=f}if(e-d>2*Math.PI){e=1.99999*Math.PI}var g=e-d<=Math.PI?0:1;return["M",a,b,"L",a+Math.cos(d)*c,b-Math.sin(d)*c,"A",c,c,0,g,0,a+Math.cos(e)*c,b-Math.sin(e)*c,"L",a,b].join(" ")+" Z"}function d(a,b,c,d,e){var f="<rect x=\"".concat(a,"\" y=\"").concat(b,"\" width=\"").concat(c,"\" height=\"").concat(c,"\" fill=\"url(#").concat(d,")\" />");if(e){f="<a href=\"".concat(e,"\">").concat(f,"</a>")}return f}function e(b,e,f){var g=100/e.length,h=a(b).find("> circle").attr("r"),i=h,j=0,k=0,l=a(b).find(".arcs");l.empty();if(1<e.length){for(var v=0;v<e.length;v++){k+=g;var s=2*Math.PI/(100/k);a("<path />").attr("d",c(0,0,h,j,2*s)).attr("stroke",f).attr("stroke-width","6").attr("fill","none").appendTo(a(l));a(l).html(a(l).html());j+=s}}switch(e.length){case 1:i=1.3*h;break;case 2:i=h/1.25;break;case 3:i=h/1.5;break;case 4:i=h/1.75;break;case 5:i=h/1.75;break;}if(1<e.length){for(var w=0;w<e.length;w++){var m=Math.PI/e.length,n=Math.PI/h+2*(m*w);n+=Math.PI/e.length;var o=h/2*Math.cos(n),p=h/2*Math.sin(n);if(5===e.length){o=h/1.75*Math.cos(n);p=h/1.75*Math.sin(n)}o-=i/2;p-=i/2;if(2===e.length){if(1==w){p=20}else{p=-(i+20)}}var q=e[w].typecode,r=e[w].link?e[w].link:null;a(d(o,p,i,q,r)).appendTo(a(l));a(l).html(a(l).html())}}else if(1===e.length){var t=e[0].typecode,o=-i/2,p=-i/2,u=e[0].link?e[0].link:null;a(d(o,p,i,t,u)).appendTo(a(l));a(l).html(a(l).html())}}})}}});
//# sourceMappingURL=sectioncircle.min.js.map
